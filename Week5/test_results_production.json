{
  "test_info": {
    "date": "2026-01-29T02:32:39.035625",
    "version": "0.4.0"
  },
  "database_connections": {
    "ecommerce_small": {
      "status": "\u2705 success",
      "database": "ecommerce_small",
      "user": "testuser",
      "postgresql_version": "PostgreSQL 15.15 on x86_64-pc-linux-musl"
    },
    "social_medium": {
      "status": "\u2705 success",
      "database": "social_medium",
      "user": "testuser",
      "postgresql_version": "PostgreSQL 15.15 on x86_64-pc-linux-musl"
    },
    "erp_large": {
      "status": "\u2705 success",
      "database": "erp_large",
      "user": "testuser",
      "postgresql_version": "PostgreSQL 15.15 on x86_64-pc-linux-musl"
    }
  },
  "database_statistics": {
    "ecommerce_small": {
      "status": "\u2705 success",
      "tables": 7,
      "total_rows": 322,
      "table_details": [
        {
          "table": "customer_order_summary",
          "rows": 50
        },
        {
          "table": "customers",
          "rows": 50
        },
        {
          "table": "order_items",
          "rows": 0
        },
        {
          "table": "orders",
          "rows": 150
        },
        {
          "table": "product_stats",
          "rows": 36
        },
        {
          "table": "products",
          "rows": 36
        },
        {
          "table": "reviews",
          "rows": 0
        }
      ]
    },
    "social_medium": {
      "status": "\u2705 success",
      "tables": 16,
      "total_rows": 3000,
      "table_details": [
        {
          "table": "comments",
          "rows": 0
        },
        {
          "table": "follows",
          "rows": 0
        },
        {
          "table": "group_members",
          "rows": 0
        },
        {
          "table": "groups",
          "rows": 0
        },
        {
          "table": "hashtags",
          "rows": 0
        },
        {
          "table": "messages",
          "rows": 0
        },
        {
          "table": "notifications",
          "rows": 0
        },
        {
          "table": "post_hashtags",
          "rows": 0
        },
        {
          "table": "posts",
          "rows": 2000
        },
        {
          "table": "reactions",
          "rows": 0
        },
        {
          "table": "reports",
          "rows": 0
        },
        {
          "table": "trending_posts",
          "rows": 0
        },
        {
          "table": "user_activity",
          "rows": 0
        },
        {
          "table": "user_settings",
          "rows": 0
        },
        {
          "table": "user_stats",
          "rows": 500
        },
        {
          "table": "users",
          "rows": 500
        }
      ]
    },
    "erp_large": {
      "status": "\u2705 success",
      "tables": 11,
      "total_rows": 8550,
      "table_details": [
        {
          "table": "customers",
          "rows": 500
        },
        {
          "table": "departments",
          "rows": 50
        },
        {
          "table": "employees",
          "rows": 1000
        },
        {
          "table": "inventory",
          "rows": 0
        },
        {
          "table": "invoices",
          "rows": 0
        },
        {
          "table": "order_lines",
          "rows": 0
        },
        {
          "table": "products",
          "rows": 2000
        },
        {
          "table": "purchase_orders",
          "rows": 0
        },
        {
          "table": "sales_orders",
          "rows": 5000
        },
        {
          "table": "suppliers",
          "rows": 0
        },
        {
          "table": "warehouses",
          "rows": 0
        }
      ]
    }
  },
  "sql_validation": {
    "Simple SELECT": {
      "sql": "SELECT * FROM customers",
      "expected_valid": true,
      "actual_valid": true,
      "test_passed": true,
      "validation_errors": []
    },
    "SELECT with LIMIT": {
      "sql": "SELECT * FROM customers LIMIT 10",
      "expected_valid": true,
      "actual_valid": true,
      "test_passed": true,
      "validation_errors": []
    },
    "JOIN query": {
      "sql": "SELECT c.*, o.* FROM customers c JOIN orders o ON c.id = o.customer_id",
      "expected_valid": true,
      "actual_valid": true,
      "test_passed": true,
      "validation_errors": []
    },
    "INSERT (should block)": {
      "sql": "INSERT INTO customers VALUES (1, 'test')",
      "expected_valid": false,
      "actual_valid": false,
      "test_passed": true,
      "validation_errors": [
        "INSERT statements are not allowed (read-only queries only)"
      ]
    },
    "UPDATE (should block)": {
      "sql": "UPDATE customers SET name = 'test'",
      "expected_valid": false,
      "actual_valid": false,
      "test_passed": true,
      "validation_errors": [
        "UPDATE statements are not allowed (read-only queries only)"
      ]
    },
    "DELETE (should block)": {
      "sql": "DELETE FROM customers",
      "expected_valid": false,
      "actual_valid": false,
      "test_passed": true,
      "validation_errors": [
        "DELETE statements are not allowed (read-only queries only)"
      ]
    },
    "DROP TABLE (should block)": {
      "sql": "DROP TABLE customers",
      "expected_valid": false,
      "actual_valid": false,
      "test_passed": true,
      "validation_errors": [
        "DROP statements are not allowed (read-only queries only)"
      ]
    },
    "Dangerous function (should block)": {
      "sql": "SELECT pg_read_file('/etc/passwd')",
      "expected_valid": false,
      "actual_valid": false,
      "test_passed": true,
      "validation_errors": [
        "Dangerous function 'pg_read_file' is not allowed (potential security risk)"
      ]
    }
  },
  "direct_queries": [
    {
      "id": "q1",
      "database": "ecommerce_small",
      "description": "List customers",
      "status": "\u2705 success",
      "sql": "SELECT * FROM customers LIMIT 5",
      "row_count": 5,
      "column_count": 12,
      "execution_time_ms": 0.33,
      "columns": [
        {
          "name": "customer_id",
          "type": "int"
        },
        {
          "name": "email",
          "type": "str"
        },
        {
          "name": "first_name",
          "type": "str"
        },
        {
          "name": "last_name",
          "type": "str"
        },
        {
          "name": "phone",
          "type": "str"
        },
        {
          "name": "address",
          "type": "unknown"
        },
        {
          "name": "city",
          "type": "str"
        },
        {
          "name": "country",
          "type": "str"
        },
        {
          "name": "postal_code",
          "type": "unknown"
        },
        {
          "name": "created_at",
          "type": "datetime"
        },
        {
          "name": "last_login",
          "type": "unknown"
        },
        {
          "name": "is_active",
          "type": "bool"
        }
      ],
      "sample_rows": [
        {
          "customer_id": 1,
          "email": "john.moore0@email.com",
          "first_name": "John",
          "last_name": "Moore",
          "phone": "555-2960",
          "address": null,
          "city": "San Jose",
          "country": "USA",
          "postal_code": null,
          "created_at": "2024-05-26 00:00:00",
          "last_login": null,
          "is_active": true
        },
        {
          "customer_id": 2,
          "email": "bob.moore1@email.com",
          "first_name": "Bob",
          "last_name": "Moore",
          "phone": "555-6547",
          "address": null,
          "city": "Chicago",
          "country": "USA",
          "postal_code": null,
          "created_at": "2024-04-28 00:00:00",
          "last_login": null,
          "is_active": true
        }
      ]
    },
    {
      "id": "q2",
      "database": "ecommerce_small",
      "description": "Count products",
      "status": "\u2705 success",
      "sql": "SELECT COUNT(*) as total FROM products",
      "row_count": 1,
      "column_count": 1,
      "execution_time_ms": 0.69,
      "columns": [
        {
          "name": "total",
          "type": "int"
        }
      ],
      "sample_rows": [
        {
          "total": 36
        }
      ]
    },
    {
      "id": "q3",
      "database": "ecommerce_small",
      "description": "Recent orders",
      "status": "\u2705 success",
      "sql": "SELECT * FROM orders LIMIT 3",
      "row_count": 3,
      "column_count": 8,
      "execution_time_ms": 16.25,
      "columns": [
        {
          "name": "order_id",
          "type": "int"
        },
        {
          "name": "customer_id",
          "type": "int"
        },
        {
          "name": "order_date",
          "type": "datetime"
        },
        {
          "name": "status",
          "type": "str"
        },
        {
          "name": "total_amount",
          "type": "Decimal"
        },
        {
          "name": "payment_method",
          "type": "str"
        },
        {
          "name": "shipping_address",
          "type": "unknown"
        },
        {
          "name": "notes",
          "type": "unknown"
        }
      ],
      "sample_rows": [
        {
          "order_id": 1,
          "customer_id": 3,
          "order_date": "2026-01-19 00:00:00",
          "status": "delivered",
          "total_amount": "142.38",
          "payment_method": "credit_card",
          "shipping_address": null,
          "notes": null
        },
        {
          "order_id": 2,
          "customer_id": 48,
          "order_date": "2025-12-15 00:00:00",
          "status": "delivered",
          "total_amount": "368.51",
          "payment_method": "credit_card",
          "shipping_address": null,
          "notes": null
        }
      ]
    },
    {
      "id": "q4",
      "database": "ecommerce_small",
      "description": "Orders with customer names",
      "status": "\u2705 success",
      "sql": "SELECT orders.order_id, orders.total_amount FROM orders LIMIT 5",
      "row_count": 5,
      "column_count": 2,
      "execution_time_ms": 0.87,
      "columns": [
        {
          "name": "order_id",
          "type": "int"
        },
        {
          "name": "total_amount",
          "type": "Decimal"
        }
      ],
      "sample_rows": [
        {
          "order_id": 1,
          "total_amount": "142.38"
        },
        {
          "order_id": 2,
          "total_amount": "368.51"
        }
      ]
    },
    {
      "id": "q5",
      "database": "social_medium",
      "description": "List users",
      "status": "\u2705 success",
      "sql": "SELECT * FROM users LIMIT 5",
      "row_count": 5,
      "column_count": 15,
      "execution_time_ms": 1.05,
      "columns": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "username",
          "type": "str"
        },
        {
          "name": "email",
          "type": "str"
        },
        {
          "name": "password_hash",
          "type": "str"
        },
        {
          "name": "display_name",
          "type": "str"
        },
        {
          "name": "bio",
          "type": "unknown"
        },
        {
          "name": "avatar_url",
          "type": "unknown"
        },
        {
          "name": "cover_photo_url",
          "type": "unknown"
        },
        {
          "name": "location",
          "type": "unknown"
        },
        {
          "name": "website",
          "type": "unknown"
        },
        {
          "name": "birth_date",
          "type": "unknown"
        },
        {
          "name": "created_at",
          "type": "datetime"
        },
        {
          "name": "last_seen_at",
          "type": "unknown"
        },
        {
          "name": "is_verified",
          "type": "bool"
        },
        {
          "name": "is_active",
          "type": "bool"
        }
      ],
      "sample_rows": [
        {
          "user_id": 1,
          "username": "user0000",
          "email": "user0000@example.com",
          "password_hash": "hash",
          "display_name": "User 0",
          "bio": null,
          "avatar_url": null,
          "cover_photo_url": null,
          "location": null,
          "website": null,
          "birth_date": null,
          "created_at": "2024-03-25 00:00:00",
          "last_seen_at": null,
          "is_verified": true,
          "is_active": true
        },
        {
          "user_id": 2,
          "username": "user0001",
          "email": "user0001@example.com",
          "password_hash": "hash",
          "display_name": "User 1",
          "bio": null,
          "avatar_url": null,
          "cover_photo_url": null,
          "location": null,
          "website": null,
          "birth_date": null,
          "created_at": "2024-07-16 00:00:00",
          "last_seen_at": null,
          "is_verified": true,
          "is_active": true
        }
      ]
    },
    {
      "id": "q6",
      "database": "social_medium",
      "description": "Count users",
      "status": "\u2705 success",
      "sql": "SELECT COUNT(*) as total_users FROM users",
      "row_count": 1,
      "column_count": 1,
      "execution_time_ms": 0.33,
      "columns": [
        {
          "name": "total_users",
          "type": "int"
        }
      ],
      "sample_rows": [
        {
          "total_users": 500
        }
      ]
    },
    {
      "id": "q7",
      "database": "erp_large",
      "description": "List departments",
      "status": "\u2705 success",
      "sql": "SELECT * FROM departments LIMIT 5",
      "row_count": 5,
      "column_count": 3,
      "execution_time_ms": 0.53,
      "columns": [
        {
          "name": "department_id",
          "type": "int"
        },
        {
          "name": "name",
          "type": "str"
        },
        {
          "name": "code",
          "type": "str"
        }
      ],
      "sample_rows": [
        {
          "department_id": 1,
          "name": "Department 0",
          "code": "DEPT000"
        },
        {
          "department_id": 2,
          "name": "Department 1",
          "code": "DEPT001"
        }
      ]
    },
    {
      "id": "q8",
      "database": "erp_large",
      "description": "Count employees",
      "status": "\u2705 success",
      "sql": "SELECT COUNT(*) as total_employees FROM employees",
      "row_count": 1,
      "column_count": 1,
      "execution_time_ms": 0.39,
      "columns": [
        {
          "name": "total_employees",
          "type": "int"
        }
      ],
      "sample_rows": [
        {
          "total_employees": 1000
        }
      ]
    }
  ]
}