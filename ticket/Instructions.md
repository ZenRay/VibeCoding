# Instructions

## project alpha 需求和设计文档

构建一个一个简单的，使用标签分类和管理 ticket 的工具。它基于 Postgres 数据库，使用 Fast API 作为后端，使用 Typescript/Vite/Tailwind/Shadcn 作为前端。无需用户系统，当前用户可以：

- 创建/编辑/删除/完成/取消完成 ticket
- 添加/删除 ticket 的标签
- 按照不同的标签查看 ticket 列表
- 按 title 搜索 ticket

按照这个想法，帮我生成详细的需求和设计文档，放在 ../specs/0001-spec.md 文件中，输出为中文。

## Document Management
1. 非开发的内容不需要存放太冗余的代码
2. 关于项目说明和项目进度的 md 文件在 `../specs` 中完成
3. 测试文件统一存放到 `../tests` 中，该目录中的内容不需要git管理

## Progress Management
1. 对于不同阶段的管理统一使用 `../specs/spec-progess.md` 进行管理
2. 重要的更新，需要及时更新 `../specs/spec-progess.md` 文档


## Git Management
1. 进行 Git 提交时，使用 pre-commit 检查
2. push 代码到 GitHub 时，使用 action 的能力

## Dev enviroment
1. 使用 docker 生成一个合适的开发环境，如有必要可以使用 dockercompsoe 生成一个服务。Docker 的管理需要放在 ../env 中
2. 声明清楚使用的技术栈及其需要的版本
3. docker compose 的服务启动环境是在 2.x，因此需要注意是否应当使用 `docker-compose`命令还是 `docker compose`
4. 需要注意检查一下 `docker` 中 `compose` 和 `dockerfile` 文件是否存在问题


## Progress

**最后更新**：2026-01-08  
**当前版本**：v0.1.0  
**总体进度**：75% 🎯

---

### 开发阶段完成情况

| 阶段 | 名称 | 状态 | 完成度 | 说明 |
|------|------|------|-------|------|
| 阶段 0 | 环境准备 | 🟢 完成 | 100% | Docker 环境 + CI/CD |
| 阶段 1 | 数据库与后端基础 | 🟢 完成 | 100% | 模型 + 迁移 |
| 阶段 2 | 后端 API 实现 | 🟢 完成 | 100% | 15+ API + 测试 |
| 阶段 3 | 前端基础设施 | 🟢 完成 | 100% | 项目结构 + 类型 |
| 阶段 4 | 前端核心功能 | 🟢 完成 | 100% | 所有核心功能 |
| **阶段 4.5** | **环境和文档完善** | 🟢 **完成** | 100% | **Docker + 文档** |
| 阶段 5 | 前端扩展功能 | 🟢 完成 | 90% | Toast+回收站 |
| 阶段 6 | 测试与优化 | 🔵 部分完成 | 50% | 测试 82% |
| 阶段 7 | 部署与上线 | ⚪ 未开始 | 0% | 生产部署 |

---

### 核心功能完成情况 ✅

**后端功能** (100%):
- ✅ Ticket CRUD + 软删除/恢复
- ✅ Ticket 状态切换
- ✅ Tag CRUD + 自动大写
- ✅ Ticket-Tag 关联管理
- ✅ 高级搜索和过滤（状态/标签/搜索/删除状态）
- ✅ 排序和分页
- ✅ API 文档（Swagger/ReDoc）
- ✅ 单元测试 + 集成测试（35 个，覆盖率 82%）

**前端功能** (100%):
- ✅ Ticket 列表（列表布局 + 侧边栏）
- ✅ Ticket 创建/编辑/删除/恢复
- ✅ Ticket 状态切换
- ✅ Tag 管理
- ✅ 搜索功能（实时搜索 + 防抖）
- ✅ 过滤功能（状态/标签/删除状态）
- ✅ 批量操作（多选 + 批量删除）
- ✅ 排序功能（多字段 + 升降序）
- ✅ 软删除视觉效果（删除线）

**基础设施** (100%):
- ✅ Docker 开发环境（docker-compose + 热重载）
- ✅ Docker 代码检查脚本（check.sh + check-running.sh）
- ✅ GitHub Actions CI/CD（全部在 Docker 中执行）
- ✅ Pre-commit hooks
- ✅ 数据库迁移（Alembic）

**文档体系** (100%):
- ✅ 16 个技术文档（specs/ 目录）
- ✅ Docker 环境文档（env/ 目录）
- ✅ 快速开始指南
- ✅ 问题排查和经验教训

---

### 新增：阶段 4.5 - 环境和文档完善 🆕

**本阶段专注于开发体验和知识沉淀：**

1. **Docker 环境完善** ✅
   - 统一所有开发和测试在 Docker 中进行
   - 创建代码检查脚本（临时容器 + 运行中容器）
   - 优化 volume 配置（持久化依赖）

2. **CI/CD 优化** ✅
   - 重构 GitHub Actions，全部在 Docker 中执行
   - 与本地环境 100% 一致
   - 修复所有环境不一致问题

3. **文档体系建设** ✅
   - 新增 6 个核心技术文档
   - Docker 开发环境指南
   - 代码质量保证体系
   - 数据库设计详解
   - 前端架构设计
   - 经验教训总结
   - 项目开发总结

4. **问题修复和优化** ✅
   - 修复数据库测试问题（模型导入 + 文件数据库）
   - 修复标签大写问题（Service 层处理）
   - 修复格式化问题（Prettier + Black）
   - 优化项目结构（清理临时文件）

---

### 统计数据

**代码统计**：
- 后端：22 个 Python 文件，约 2,500 行
- 前端：31 个 TypeScript 文件，约 3,000 行
- 测试：4 个测试文件，35 个测试用例
- 测试覆盖率：82%+ ✅

**文档统计**：
- Specs 文档：16 个
- Env 文档：5 个
- 总字数：约 55,000 字

**配置文件**：
- Docker 配置：5 个文件
- CI/CD 配置：3 个 workflow
- 代码质量配置：6 个配置文件

---

### 实际完成任务数

**已完成**：104/125 任务（82%）

| 阶段 | 任务数 | 已完成 | 完成率 |
|------|-------|-------|-------|
| 阶段 0 | 10 | 10 | 100% |
| 阶段 1 | 22 | 22 | 100% |
| 阶段 2 | 25 | 25 | 100% |
| 阶段 3 | 17 | 17 | 100% |
| 阶段 4 | 17 | 17 | 100% |
| **阶段 4.5** | **3** | **3** | **100%** |
| 阶段 5 | 12 | 10 | 90% |
| 阶段 6 | 14 | 0 | 0% |
| 阶段 7 | 12 | 0 | 0% |

---

### 下一步计划

**短期（可选）**：
- 阶段 5：前端扩展功能（回收站、高级搜索）
- 阶段 6：测试与优化（提升覆盖率到 90%+）

**长期（生产就绪）**：
- 阶段 7：部署与上线（Nginx、HTTPS、监控）

**当前状态**：
> **MVP 版本已完成，所有核心功能可用！** ✨  
> 建议先使用和收集反馈，再决定是否开发扩展功能。

## Implementation Plan
✅ 已完成 - 详细的实现计划已生成在 `../specs/0002-implementation-plan.md` 中

**实施计划概要**：
- **总预估时间**：8-10 周（全职开发）
- **MVP 版本**：4-5 周
- **总任务数**：125 个
- **关键里程碑**：6 个
- **开发阶段**：7 个
- **新增内容**：API 文档配置、测试工具使用、Swagger UI/ReDoc 集成

**下一步行动**：
1. 完成阶段 4 剩余任务：响应式设计、分页 UI、Toast 提示
2. 开始阶段 5：前端扩展功能（回收站、高级搜索）
3. 继续按照实施计划推进开发工作

## Impemente Stage
根据 `../spec/0002-impementation-plan.md`  完整实现这个项目中的 phase1 的代码。所有执行阶段的 `md` 文件都需要存放到 ../specs
